---
title: ìµœì ì˜ ëª¨ë“ˆí™” êµ¬ì¡°ë¥¼ ì°¾ê¸° ìœ„í•œ ì‚½ì§ˆê¸°
excerpt: ì´ë²ˆ Tour Korea í† ì´ í”„ë¡œì íŠ¸ì—ì„œ ëª¨ë“ˆí™”ì™€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜(MSA)ë¥¼ ì ìš©í•˜ë©° ì–»ì€ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ê¸°ìˆ  ë¸”ë¡œê·¸ì™€ ì„œì ì„ ì°¸ê³ í•˜ì—¬ ëª¨ë“ˆí™”ì˜ ì²«ê±¸ìŒì„ ë—€ ê³¼ì •ê³¼ ê·¸ ì‹œí–‰ì°©ì˜¤ë¥¼ ìƒì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤. í”„ë¡œì íŠ¸ì˜ íŠ¹ì„±ê³¼ ëª©í‘œì— ë§ì¶° ëª¨ë“ˆí™”ë¥¼ ì§„í–‰í•œ ë°©ë²•, ë¬¸ì œì , ê·¸ë¦¬ê³  ìµœì í™”ëœ ìµœì¢… ëª¨ë“ˆí™” êµ¬ì¡°ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.
categories: [ msa ]
tags: [ëª¨ë“ˆí™”, MSA, Java]
image:
  path: /assets/img/wil/covers/java.png
---

# ëª¨ë“ˆí™”ë¥¼ ìœ„í•œ ê¸´ ì—¬ì •
ì´ë²ˆ Tour Korea í† ì´ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©°, ëª¨ë“ˆí™”ì™€ MSAë¥¼ ì ìš©í•˜ëŠ” ì†Œì¤‘í•œ ê²½í—˜ì„ í–ˆìŠµë‹ˆë‹¤. 
ë§ì€ ê¸°ìˆ  ë¸”ë¡œê·¸ì™€ ì±…ì„ ì°¸ê³ í•˜ë©° ëª¨ë“ˆí™”ì˜ ì²«ê±¸ìŒì„ ë–¼ì—ˆê³ , ê·¸ ê³¼ì •ì—ì„œì˜ ì‹œí–‰ì°©ì˜¤ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.

## ğŸ” ì–´ë–»ê²Œ ëª¨ë“ˆí™” í•  ê²ƒì¸ê°€?
ëª¨ë“ˆí™”ì˜ ë°©ë²•ì€ í”„ë¡œì íŠ¸ì˜ íŠ¹ì„±ê³¼ ëª¨ë“ˆì˜ í¬ê¸°ì— ë”°ë¼ ë‹¤ì–‘í•©ë‹ˆë‹¤. ì œê°€ ì°¸ê³ í•œ ê¸°ìˆ  ë¸”ë¡œê·¸ì™€ ì„œì ë§ˆë‹¤ ì œì‹œí•˜ëŠ” ë°©ë²•ì´ ë‹¬ëìŠµë‹ˆë‹¤. ì´ì— ì €ë§Œì˜ ëª©í‘œë¥¼ ê°€ì§€ê³  ëª¨ë“ˆí™”ë¥¼ ì§„í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

ì €ì˜ ëª¨ë“ˆí™”ì˜ ëª©ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
1. í•œ ë²ˆ ëª¨ë“ˆì„ ë§Œë“¤ë©´ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì¬í™œìš©í•˜ê³  ì‹¶ë‹¤. ì •í™•íˆëŠ” ë„ë©”ì¸ ë‹¨ìœ„, ê¸°ëŠ¥ ë‹¨ìœ„ë¡œ ì¬í™œìš©.
2. ì½”ë“œë¥¼ ë³€ê²½í–ˆì„ ë•Œ ì „íŒŒë˜ëŠ” ì˜í–¥ë„ë¥¼ ìµœì†Œí™”í•˜ê³  ì‹¶ë‹¤.

ì´ë¥¼ ìœ„í•´ì„œ ë‹¤ìŒ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“ˆí™”ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.
> **í•˜ë‚˜ì˜ ì±…ì„**, **ë…ë¦½ì„±**, **ì¬í™œìš©** 

## ğŸ” ì²« ë²ˆì§¸ ì‹œë„
![first_module.png](/assets/img/project/msa/first_module.png)

- ë„ë©”ì¸ì„ Aggregate ì¦‰, ë…¼ë¦¬ì ìœ¼ë¡œ ê´€ë ¨ëœ ê°ì²´ë“¤ë¡œ ê·¸ë£¹í™”í•˜ì—¬ ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ë„ë©”ì¸ì€ `í”„ë¡œê·¸ë˜ë°ìœ¼ë¡œ í•´ê²°í•˜ê³ ì í•˜ëŠ” ì£¼ì œ`ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
- ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” `Security`, `Exception ì²˜ë¦¬`, `API ì‘ë‹µ í´ë˜ìŠ¤`, `Config í´ë˜ìŠ¤` ë“±ì€ `Core-Service`ì— ìœ„ì¹˜ì‹œì¼°ìŠµë‹ˆë‹¤.


### ë¬¸ì œì 
1. ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì˜ì¡´ì„±ì„ `Core-Service`ì— ì¶”ê°€í•˜ë‹¤ ë³´ë‹ˆ ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ì„ ê°–ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
   - Core-Serviceì— ìˆëŠ” `OpenFeign` ê´€ë ¨ ì†ŒìŠ¤ë“¤ì€ `File-Service`ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ì˜ì¡´ì„±ì„ ê°–ê²Œ ë©ë‹ˆë‹¤.

![first_folder.png](/assets/img/project/msa/first_folder.png) <br>


2. ê³„ì¸µ ë³„ë¡œ ì™„ë²½í•œ ìº¡ìŠí™”ë¥¼ ë‹¬ì„±í•˜ê¸° ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ë¦¬íŒ©í† ë§ í•˜ëŠ” ê³¼ì •ì—ì„œ ê³„ì¸µì˜ ê´€ê³„ê°€ ëª¨í˜¸í•´ì§€ê³  ìˆìŒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.

    ```java
    public void sendPasswordResetEmail(String email) {
        // ì´ë©”ì¼ í† í°ì„ ìƒì„±í•˜ê³  ì €ì¥í•˜ëŠ” ë¡œì§
        var link = UUID.randomUUID().toString();
        emailTokenRepository.save(
                EmailToken.builder()
                        .email(email)
                        .link(link)
                        .build()
        );
    
        // ì´ë©”ì¼ í…œí”Œë¦¿ì„ ë§Œë“¤ê³  ì´ë¥¼ ì „ì†¡í•˜ëŠ” ë¡œì§ 
        var message = javaMailSender.createMimeMessage();
        MimeMessageHelper helper = null;
        try {
            helper = new MimeMessageHelper(message, true);
            helper.setTo(email);
            var context = new Context();
            context.setVariable("link", link);
            var html = templateEngine.process("PasswordEmailForm.html", context);
            helper.setText(html, true);
            javaMailSender.send(message);
        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
    ```
   
ë‹¤ìŒ ì½”ë“œì˜ ë¬¸ì œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
1. ì´ë©”ì¼ í† í°ì„ ìƒì„±í•˜ê³  ì €ì¥í•˜ëŠ” ë¡œì§ì´ ì´ë©”ì¼ì„ ì „ì†¡í•˜ëŠ” ë¡œì§ê³¼ ê°™ì€ ë ˆì´ì–´ì— ì¡´ì¬í•œë‹¤. 
2. ì½”ë“œë¥¼ ì½ì„ ë•Œ ì„¸ë¶€ë¡œì§ì„ í•˜ìœ„ ë ˆì´ì–´ì— ìœ„ì„í•´ì•¼ ì½”ë“œê°€ ì½ê¸° ì‰¬ì›Œì§€ëŠ”ë° ì´ë¥¼ ë‹¬ì„±í•˜ì§€ ëª»í–ˆë‹¤.

## ğŸ” ë‘ ë²ˆì§¸ ì‹œë„
ì²« ë²ˆì§¸ ì‹œë„ì—ì„œ ê²ªì€ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì„¸ë¶€ ëª¨ë“ˆí™”ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
 - `Core-Service`ë¥¼ ì‘ì€ ë‹¨ìœ„ì¸ `Global Utils`, `Component`ë¡œ ì„¸ë¶€ ëª¨ë“ˆí™” í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•„ìš”í•œ ì˜ì¡´ì„±ë§Œ ì¬í™œìš© í•˜ê³ ì í–ˆìŠµë‹ˆë‹¤.
 - ê°ê°ì˜ ë„ë©”ì¸ì•ˆì—ì„œë„ í´ë” êµ¬ì¡°ë¥¼ `api`, `bridge`, `domain`ìœ¼ë¡œ ì„¸ë¶€ ëª¨ë“ˆí™”í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê³„ì¸µì˜ ì—­í• ì„ ì—„ê²©í•˜ê²Œ êµ¬ë¶„í•˜ê³ ì í–ˆìŠµë‹ˆë‹¤.

![second_module.png](/assets/img/project/msa/second_module.png)


### âœ… ï¸Global Utils 
- ëª¨ë“  í”„ë¡œê·¸ë¨ì— ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ Pure Javaë¡œë§Œ êµ¬ì„±ë©ë‹ˆë‹¤.
- **"ê°€ëŠ¥í•œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤"** ë¥¼ ê¸°ë³¸ ì›ì¹™ìœ¼ë¡œ í•©ë‹ˆë‹¤.
- `Utils í´ë˜ìŠ¤`, `ì‘ë‹µ ì½”ë“œ`

### âœ… Component 
- Pure Javaë¡œ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ì§€ë§Œ, ë§ì€ ëª¨ë“ˆì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ëª¨ë“ˆë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.
- `Jwt ëª¨ë“ˆ`, `Security ëª¨ë“ˆ`, `ì˜ˆì™¸ ì²˜ë¦¬ ëª¨ë“ˆ`


### âœ… Application
- `global utils`, `component` ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
- `UserService`, `PostService`, `FileService` ë“±
- ì„œë¹„ìŠ¤ ì•ˆì—ì„œì˜ ì˜ì¡´ì„± ê²©ë¦¬ì™€ ìœ ì§€ë³´ìˆ˜ì„± ì¦ê°€ë¥¼ ìœ„í•´ Application ëª¨ë“ˆë„ ë‹¤ì‹œ ëª¨ë“ˆí™”í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ ì„¸ ê°€ì§€ í•˜ìœ„ ëª¨ë“ˆì„ ê°€ì§‘ë‹ˆë‹¤.
  #### API ë ˆì´ì–´
  - Controller: ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë°›ê³  ì‘ë‹µì„ ë°˜í™˜í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
  
  #### Bridge ë ˆì´ì–´ 
  - APIì™€ Service ì‚¬ì´ì—ì„œ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê±°ë‚˜ ë³€í™˜í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
  
  #### Domain ë ˆì´ì–´
  - Entity, Repository, Serviceë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

### ğŸ‘ ì¥ì  
1. ëª¨ë“ˆ ì„¸ë¶„í™”ë¥¼ í†µí•´ **í•„ìš”í•œ ì˜ì¡´ì„±ë§Œ** ê°€ì ¸ì˜¬ ìˆ˜ ìˆìœ¼ë©° ì´ë¥¼ í†µí•´ ì˜ì¡´ê´€ê³„ íŒŒì•…ë„ ìš©ì´í•´ì¡ŒìŠµë‹ˆë‹¤.
   - `file-service`ì˜ gradle íŒŒì¼
     ~~~gradle
     dependencies {
         implementation project(':global-utils')
         implementation project(':component-exception')
         implementation project(':component-security')
         implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.4.0'
         testImplementation 'org.springframework.boot:spring-boot-starter-test'
         implementation 'com.amazonaws:aws-java-sdk-s3:1.12.683'
      }
     ~~~

2. ì„¸ë¶€ ë¡œì§ì„ í•˜ìœ„ ë ˆì´ì–´ì— ìœ„ì„í•˜ê²Œ ê°•ì œí•¨ìœ¼ë¡œì¨ ë” ì½ê¸° í¸í•œ ì½”ë“œê°€ ëœë‹¤.
  - ì´ì „ì—ëŠ” emailTokenServiceì˜ ë¡œì§ê³¼ mailSenderServiceì˜ ë¡œì§ì´ í•œ í•¨ìˆ˜ì— ì¡´ì¬í–ˆì§€ë§Œ, ì´ë¥¼ ìœ„ì„í•¨ìœ¼ë¡œì¨ ë” ì½ê¸° ì‰¬ìš´ ì½”ë“œê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. 
  - ë¬¼ë¡  ì´ì „ êµ¬ì¡°ì—ì„œë„ í•´ë‹¹ ë¡œì§ì„ êµ¬ì„±í•  ìˆ˜ ìˆì§€ë§Œ, ì´ë¥¼ ê°•ì œí•œë‹¤ëŠ” ì ì—ì„œ ì˜ë¯¸ê°€ ìˆìŠµë‹ˆë‹¤.

    ~~~java
    public void sendPasswordResetEmail(PasswordResetRequestForm form) {
        var link = UUID.randomUUID().toString();
        EmailToken emailToken = emailTokenService.save(
                EmailToken.of(link)
        );
        
        mailSenderService.sendPasswordResetEmail(emailToken.getEmail(), emailToken.getLink());
    }
    ~~~

3. ë ˆì´ì–´ ê°„ì˜ ë””ì»¤í”Œë§ì´ ì‹¬í•´ ì½”ë“œì˜ ì–‘ì´ ë§ì•„ì§€ì§€ë§Œ ì „íŒŒë˜ëŠ” ì˜í–¥ë„ë¥¼ ìµœì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   - ê° ë ˆì´ì–´ëŠ” í•˜ìœ„ ë ˆì´ì–´ì—ë§Œ ì˜ì¡´ì„±ì„ ê°€ì§€ê¸° ë•Œë¬¸ì— domainê³„ì¸µì—ì„œ bridge ê³„ì¸µì— ì •ì˜ëœ RegisterRequestë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 
   - bridgeì—ì„œ ì¸ì½”ë”©í•œ íŒ¨ìŠ¤ì›Œë“œë¥¼ DTOí´ë˜ìŠ¤ì— ë‹´ì•„ ë„˜ê²¨ì£¼ê¸° ë•Œë¬¸ì— domain ë ˆì´ì–´ì—ì„œ ì‚¬ìš©ì íšŒì›ê°€ì…ì— ë” ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   
    ~~~java
    public UserDetail registerUser(RegisterRequest form) {
        UserDTO.RegisterDTO registerDTO = form.toDTO(encodePassword(form.password()));
    
        User user = userService.registerUser(registerDTO);
    
        return UserDetail.toResponse(user);
    }
    ~~~
   
## ğŸ” ì„¸ ë²ˆì§¸ ì‹œë„
### ë¶ˆí¸í•œ ë¬¸ì œ
ë‘ ë²ˆì§¸ ë°©ë²•ì„ í†µí•´ ì˜ì¡´ì„±ì„ ìµœì†Œí™”í•˜ê³  ë ˆì´ì–´ ê°„ì˜ ì „íŒŒ ë²”ìœ„ë¥¼ ìµœì†Œí™”í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë„ ì¡´ì¬í–ˆìŠµë‹ˆë‹¤.

~~~gradle
// userserivce-bridge
dependencies {
    implementation project(":component-email")
    implementation project(":component-jwt")
    implementation project(":userservice-domain")
    implementation project(":global-utils")
    implementation project(":component-security")
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.cloud:spring-cloud-starter-circuitbreaker-resilience4j'
    implementation 'org.springframework.boot:spring-boot-starter-mail'
    implementation 'org.springframework.cloud:spring-cloud-starter-openfeign'
}

// userservice-domain
dependencies {
    implementation project(":component-jwt")
    implementation project(":component-exception")
    compileOnly 'org.springframework.boot:spring-boot-starter-security'
    runtimeOnly 'com.mysql:mysql-connector-j'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
}
~~~
- ë„ë©”ì¸ë‚´ì—ì„œ ì˜ì¡´ì„±ì„ ì¤‘ë³µí•´ì„œ ê°€ì ¸ì™€ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨
- ë¶ˆí•„ìš”í•˜ê²Œ ì‘ì„±í•´ì•¼ í•  ì½”ë“œì˜ ì¦ê°€
  - api ë ˆì´ì–´ì—ì„œ bridge ë ˆì´ì–´ë¡œ requestë¥¼ ë„˜ê²¨ì¤„ ë•Œ ìƒˆë¡œìš´ DTOë¥¼ ë§Œë“¤ì–´ ë„˜ê²¨ì£¼ì–´ì•¼ í•œë‹¤.(bridgeì—ì„œëŠ” apië¡œì˜ ì˜ì¡´ì„±ì´ ì—†ê¸° ë•Œë¬¸)
- ë„ë©”ì¸ë³„ë¡œ ìœ ë¦¬í•œ êµ¬ì¡°ê°€ ë‹¤ë¥´ë‹¤. ê°„ë‹¨í•œ ì„œë¹„ìŠ¤ì˜ ê²½ìš° bridge ë ˆì´ì–´ê°€ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤.



### í•´ê²°ì±…
- Application ëª¨ë“ˆì•ˆì—ì„œ ì„¸ë¶€ ëª¨ë“ˆí™”ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ëª¨ë“ˆí™”ì˜ ë²”ìœ„ë¥¼ ë„“í˜ìœ¼ë¡œì¨ ë¶ˆí•„ìš”í•œ ì½”ë“œ ì‘ì„±ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë  ëª¨ë“ˆì€ component í´ë” í•˜ìœ„ì— ìœ„ì¹˜ì‹œí‚¤ë©°, ê°ê°ì˜ ëª¨ë“ˆì€ í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ ë‹´ë‹¹í•©ë‹ˆë‹¤.
  - `OpenFeign`, `Security`, `Exception`, `Email`, `Jwt` ë“±

## ğŸ” ìµœì¢… ëª¨ë“ˆí™” êµ¬ì¡°
```bash
â”œâ”€â”€ applications
â”‚Â Â  â”œâ”€â”€ article-service
â”‚Â Â  â”œâ”€â”€ build
â”‚Â Â  â”œâ”€â”€ build.gradle
â”‚Â Â  â”œâ”€â”€ discovery-service
â”‚Â Â  â”œâ”€â”€ file-service
â”‚Â Â  â”œâ”€â”€ gateway-service
â”‚Â Â  â”œâ”€â”€ notification-service
â”‚Â Â  â””â”€â”€ user-service
â”œâ”€â”€ component
â”‚Â Â  â”œâ”€â”€ component-email
â”‚Â Â  â”œâ”€â”€ component-exception
â”‚Â Â  â”œâ”€â”€ component-jpa
â”‚Â Â  â”œâ”€â”€ component-openfeign
â”‚Â Â  â”œâ”€â”€ component-security
â”‚Â Â  â””â”€â”€ component-web
â”œâ”€â”€ global-utils
â”œâ”€â”€ gradle
â”œâ”€â”€ settings.gradle
```


